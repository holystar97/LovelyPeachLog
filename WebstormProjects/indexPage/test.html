<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>index Page</title>
</head>
<body>
<script>
    var index=1;
</script>
<div>
    <input type="text" id="txtVal">
    <button onclick="addLi()">등록</button>
    <ul id="list">

    </ul>

    <div id="user">

    </div>


    <script>
        document.getElementById("user").innerHTML=sessionStorage.getItem("1");
        document.getElementById("user").innerHTML+=sessionStorage.getItem("2");
        document.getElementById("user").innerHTML+=sessionStorage.getItem("3");
    </script>
    <script>
        function addLi(){
            var txtVal =document.getElementById('txtVal').value,
                listNode=document.getElementById('list'),
                liNode=document.createElement("LI");
                var current_user ="사용자 "+ index,
                txtNode=document.createTextNode(current_user + txtVal),
                btnNode=document.createElement("button");
            btnNode.setAttribute("id","redirect");
            btnNode.innerHTML="Connect";
            index++;

            document.getElementById("redirect").innerText

            liNode.appendChild(txtNode);
            liNode.appendChild(btnNode);
            listNode.appendChild(liNode);


            var elements =document.querySelectorAll('#redirect')
            elements.forEach(function(el){
                el.addEventListener('click',() =>{
                    window.location.href="file:///Users/mkrice/WebstormProjects/indexPage/final.html";
                });
                sessionStorage.setItem("1",current_user);
                sessionStorage.setItem("2",txtVal);
                sessionStorage.setItem("3",JSON.stringify(btnNode));




            })


        }
    </script>

    <script>
    </script>
</div>


<!--<button id="redirect">Connect</button>
<script>
    document.querySelector('#redirect')
        .addEventListener('click',() =>{
            window.location.href="file:///Users/mkrice/WebstormProjects/indexPage/final.html";
        });
</script>-->


<!--
 var elements =document.querySelectorAll('#redirect')
                elements.forEach(function(el){
                    el.addEventListener('click',() =>{
                        window.location.href="file:///Users/mkrice/WebstormProjects/indexPage/final.html?ip="+text;
                    });
                })
 -->


</body>
</html>